(()=>{"use strict";const t=document.querySelector("[data-list-display-container]"),e=document.querySelector("[data-list-title]"),n=document.querySelector("[data-list-count]"),o=document.querySelector("[data-tasks]"),i=document.getElementById("task-template"),a=document.querySelector("[data-new-task-form]"),r=document.querySelector("[data-new-task-input]");function l(){S(p),y.forEach((t=>{const e=document.createElement("li");e.dataset.listId=t.id,e.classList.add("list-name"),e.innerText=t.name,t.id===f&&e.classList.add("active-list"),p.appendChild(e)}));const n=y.find((t=>t.id===f));null==f?t.style.display="none":(t.style.display="",e.innerText=n.name,s(n),S(o),function(t){console.log(t.tasks),t.tasks.forEach((t=>{const e=document.importNode(i.content,!0),n=e.querySelector("input");n.id=t.id,n.checked=t.complete;const a=e.querySelector("label");a.htmlFor=t.id,a.append(t.name),o.appendChild(e)}))}(n))}function s(t){const e=t.tasks.filter((t=>!t.complete)).length,o=1===e?"task":"tasks";n.innerText=`${e} ${o} remaining`}o.addEventListener("click",(t=>{if("input"===t.target.tagName.toLowerCase()){const e=y.find((t=>t.id===f));e.tasks.find((e=>e.id===t.target.id)).complete=t.target.checked,u(),s(e)}}));const d="task.lists",c="task.selectedListId";function u(){localStorage.setItem(d,JSON.stringify(y)),localStorage.setItem(c,f)}function m(){u(),l()}const p=document.querySelector("[data-lists");let y=JSON.parse(localStorage.getItem(d))||[],f=localStorage.getItem(c);function S(t){for(;t.firstChild;)t.removeChild(t.firstChild)}document.querySelector("todo-header"),p.addEventListener("click",(t=>{if("li"===t.target.tagName.toLowerCase()){f=t.target.dataset.listId;const e=y.find((t=>t.id===f));1==e.priority?document.querySelector(".todo-header").classList.add("priority-header"):document.querySelector(".todo-header").classList.remove("priority-header"),console.log(e),m()}}));const k=document.querySelector("[data-new-list-form"),g=document.querySelector("[data-new-list-input"),h=document.querySelector("[data-delete-list-button]");(f=null)&&(t.style.display="none"),l(),k.addEventListener("submit",(t=>{t.preventDefault();const e=g.value;if(null==e||""===e)return;const n=(o=e,{id:Date.now().toString(),name:o,tasks:[],priority:!1});var o;g.value=null,y.push(n),m(),console.log(f)})),a.addEventListener("submit",(t=>{t.preventDefault();const e=r.value;if(null==e||""===e)return;const n=(o=e,{id:Date.now().toString(),name:o,complete:!1});var o;r.value=null,y.find((t=>t.id===f)).tasks.push(n),m()})),h.addEventListener("click",(t=>{y=y.filter((t=>t.id!==f)),f=null,m()})),document.querySelector("[data-delete-task-button]").addEventListener("click",(t=>{const e=y.find((t=>t.id===f));e.tasks=e.tasks.filter((t=>!t.complete)),m()})),document.querySelector("[data-prioritize-list-button]").addEventListener("click",(t=>{const e=y.find((t=>t.id===f));0==e.priority?e.priority=!0:1==e.priority&&(e.priority=!1)}))})();